(window["webpackJsonpface-recognition-app"]=window["webpackJsonpface-recognition-app"]||[]).push([[0],{113:function(e){e.exports=JSON.parse('[{"name":"Robby","descriptors":[[-0.03954891487956047,0.1367088258266449,0.06779986619949341,-0.00237358920276165,-0.031713999807834625,-0.03249687701463699,-0.11492109298706055,-0.12640509009361267,0.1411580592393875,-0.09574378281831741,0.2283795028924942,-0.041312895715236664,-0.1922273486852646,-0.1082783117890358,-0.02989136427640915,0.1884545385837555,-0.22767570614814758,-0.10929113626480103,-0.057295192033052444,-0.016014043241739273,0.07089044153690338,0.08604941517114639,0.06273799389600754,-0.005753247998654842,-0.0532156303524971,-0.3725884258747101,-0.07896365225315094,-0.11849945783615112,0.02927442081272602,-0.06583960354328156,-0.10780417174100876,0.02245403453707695,-0.15296465158462524,-0.04995422810316086,0.04130098596215248,0.033235739916563034,-0.020856011658906937,-0.040736787021160126,0.2184433788061142,-0.02831173874437809,-0.19304127991199493,0.07522893697023392,0.014295445755124092,0.22358021140098572,0.22441738843917847,0.08879876136779785,0.004499934613704681,-0.16773676872253418,0.13248875737190247,-0.14473973214626312,0.02931741438806057,0.18476881086826324,0.06991925835609436,0.07811626046895981,-0.021251561120152473,-0.1085810661315918,0.009093847125768661,0.02309626340866089,-0.08257684856653214,0.006642851047217846,0.10166110843420029,-0.14766427874565125,-0.008506419137120247,-0.018538910895586014,0.21998675167560577,0.00034407898783683777,-0.09434878081083298,-0.16096118092536926,0.07904908061027527,-0.132651224732399,-0.11856575310230255,0.007833006791770458,-0.15541905164718628,-0.15158550441265106,-0.30983102321624756,0.005202647298574448,0.36883169412612915,0.03848330304026604,-0.22802777588367462,0.08082439005374908,-0.04347611591219902,-0.01723940670490265,0.1540541797876358,0.18089158833026886,-0.029085367918014526,-0.02144232764840126,-0.1099778339266777,0.004840437322854996,0.2568007707595825,-0.1293952912092209,-0.019606664776802063,0.21841949224472046,-0.020229313522577286,0.1442994922399521,0.026584267616271973,0.03421715646982193,-0.02669636160135269,0.05435509234666824,-0.10406285524368286,0.03512416407465935,0.093667171895504,-0.005239630118012428,-0.023502783849835396,0.11383862048387527,-0.13632948696613312,0.10277645289897919,-0.004700603429228067,0.04320390522480011,0.07965932041406631,-0.017459029331803322,-0.09679346531629562,-0.11340731382369995,0.14741624891757965,-0.16870726644992828,0.23399178683757782,0.19205254316329956,0.05665046349167824,0.13123536109924316,0.11140855401754379,0.1323022097349167,-0.023496922105550766,0.008977789431810379,-0.24449139833450317,-0.04044608771800995,0.12295988947153091,0.05999438092112541,0.05512323975563049,0.018020963296294212],[-0.025770947337150574,0.0896662026643753,0.05888292193412781,0.011293756775557995,-0.07877930998802185,-0.033000312745571136,-0.08025351911783218,-0.06741706281900406,0.11845049262046814,-0.0992133691906929,0.22954517602920532,-0.04399977996945381,-0.1933542937040329,-0.06671486794948578,-0.03206361085176468,0.20026513934135437,-0.19536633789539337,-0.10036399960517883,-0.07823443412780762,0.003448832780122757,0.10457402467727661,0.054744839668273926,0.034194570034742355,0.015891827642917633,-0.06548254191875458,-0.3595130443572998,-0.07505001872777939,-0.0722174346446991,0.05719820410013199,-0.06819725036621094,-0.08611734211444855,0.05891354754567146,-0.11734192073345184,-0.061898112297058105,0.06313694268465042,0.05897517502307892,-0.04435531795024872,-0.06052006036043167,0.20935064554214478,-0.025913862511515617,-0.24153119325637817,0.08472946286201477,0.022433802485466003,0.24934111535549164,0.23168118298053741,0.09710836410522461,0.03283862769603729,-0.17157956957817078,0.1060330718755722,-0.16969165205955505,0.037857428193092346,0.1696396768093109,0.08264481276273727,0.09084034711122513,-0.02080390602350235,-0.11417673528194427,0.02720944955945015,0.05400129780173302,-0.09585109353065491,-0.007481400389224291,0.09257461130619049,-0.13912253081798553,0.025652524083852768,-0.04841778799891472,0.20454195141792297,-0.0036010248586535454,-0.10033206641674042,-0.16998523473739624,0.06825920194387436,-0.1572161763906479,-0.1202169880270958,0.03850717842578888,-0.16010601818561554,-0.14615681767463684,-0.3175460398197174,-0.006495669484138489,0.38427314162254333,0.054507505148649216,-0.19110873341560364,0.08114828169345856,-0.013453783467411995,-0.00910062063485384,0.1456066519021988,0.18371886014938354,-0.041767120361328125,-0.030554955825209618,-0.09463556855916977,0.013347499072551727,0.25300154089927673,-0.1330532431602478,-0.02378157712519169,0.1940585970878601,-0.003018236719071865,0.08979082107543945,0.0399022176861763,0.04596539959311485,-0.036929357796907425,0.062146078795194626,-0.09089643508195877,-0.0012538842856884003,0.10515247285366058,-0.03384550288319588,0.011580411344766617,0.10559475421905518,-0.16022546589374542,0.12286316603422165,-0.04012538492679596,0.06359466165304184,0.1046980693936348,-0.01979263685643673,-0.11989372968673706,-0.08486650139093399,0.16138945519924164,-0.16841420531272888,0.21537548303604126,0.20482614636421204,0.06669387966394424,0.10066461563110352,0.1454923152923584,0.12832552194595337,-0.02844911813735962,0.005630435422062874,-0.23386423289775848,-0.008809919469058514,0.12564243376255035,0.03474146127700806,0.08505751192569733,0.00016121810767799616],[-0.031863413751125336,0.09431362897157669,0.055651165544986725,0.019856031984090805,-0.07294923812150955,-0.027608217671513557,-0.0770183801651001,-0.0713328868150711,0.13111601769924164,-0.09201965481042862,0.21106883883476257,-0.034139905124902725,-0.1960270255804062,-0.07205438613891602,-0.045228101313114166,0.20175106823444366,-0.1924152374267578,-0.10045754909515381,-0.07693396508693695,-0.007569462992250919,0.10784801840782166,0.056343622505664825,0.032583292573690414,0.012156527489423752,-0.05766484513878822,-0.3593015968799591,-0.07525242865085602,-0.07905468344688416,0.06359197199344635,-0.07296730577945709,-0.0892219990491867,0.07355783134698868,-0.10180898010730743,-0.05689562112092972,0.05282263085246086,0.06301547586917877,-0.046019457280635834,-0.06234031915664673,0.21108628809452057,-0.024306554347276688,-0.2382691651582718,0.08405320346355438,0.023216333240270615,0.25350654125213623,0.23316115140914917,0.07747194916009903,0.04142723232507706,-0.16821938753128052,0.10926951467990875,-0.1588599681854248,0.02402389422059059,0.17985495924949646,0.07513535767793655,0.09596195816993713,-0.01490619033575058,-0.11428473144769669,0.023806676268577576,0.04495924338698387,-0.09656821936368942,0.010835407301783562,0.0818668007850647,-0.14387516677379608,0.005024237558245659,-0.033892638981342316,0.18182224035263062,0.0036493679508566856,-0.09114602953195572,-0.18532337248325348,0.0829119011759758,-0.1730547845363617,-0.12704917788505554,0.04217063635587692,-0.16632091999053955,-0.15363715589046478,-0.31025806069374084,-0.010142306797206402,0.38715121150016785,0.06055697426199913,-0.19344748556613922,0.0942339152097702,0.0025169062428176403,-0.02343946322798729,0.15408892929553986,0.20803707838058472,-0.045436792075634,-0.012575474567711353,-0.09705643355846405,0.014998361468315125,0.2483954280614853,-0.12238875776529312,-0.03477666899561882,0.20291757583618164,0.010159382596611977,0.09670037031173706,0.045262549072504044,0.05073834955692291,-0.026291348040103912,0.05539797991514206,-0.10722171515226364,-0.02114737220108509,0.12410388886928558,-0.03895220905542374,0.005313517525792122,0.09815634787082672,-0.14093025028705597,0.12688328325748444,-0.03221810236573219,0.07811155915260315,0.09596826136112213,-0.02307259477674961,-0.1174364760518074,-0.07094873487949371,0.17532756924629211,-0.1484520137310028,0.21180322766304016,0.2093757838010788,0.0698397159576416,0.09137354791164398,0.15245477855205536,0.12371817231178284,-0.013719734735786915,-0.0038754604756832123,-0.22924791276454926,-0.006094647571444511,0.11493879556655884,0.03341029956936836,0.07113706320524216,0.0015991650288924575],[-0.053022366017103195,0.09771054238080978,0.07011091709136963,-0.0071383751928806305,-0.04519747570157051,-0.03539160266518593,-0.11080165207386017,-0.10276958346366882,0.13435876369476318,-0.12019739300012589,0.23500196635723114,-0.04918747767806053,-0.17882680892944336,-0.08805574476718903,-0.04531872272491455,0.1946001946926117,-0.23092110455036163,-0.11289593577384949,-0.047637324780225754,-0.023065872490406036,0.08851016312837601,0.08789078146219254,0.043434321880340576,0.0020925989374518394,-0.07397974282503128,-0.38606855273246765,-0.07092486321926117,-0.11776256561279297,0.027739251032471657,-0.06630892306566238,-0.10496887564659119,0.029011355713009834,-0.1677531898021698,-0.04340386390686035,0.018344305455684662,0.017784463241696358,-0.006777114234864712,-0.03631376847624779,0.21267366409301758,0.007831308990716934,-0.21950098872184753,0.0695078894495964,-0.008974273689091206,0.23859325051307678,0.2239357829093933,0.09021997451782227,-0.0034452229738235474,-0.14193092286586761,0.13865745067596436,-0.16614839434623718,0.04271163046360016,0.1806129366159439,0.06947369128465652,0.08045831322669983,-0.032055359333753586,-0.08943703770637512,0.007694806903600693,0.02897832915186882,-0.06885907799005508,0.01690363697707653,0.09086038172245026,-0.1360495388507843,0.024895306676626205,-0.020636243745684624,0.2316020429134369,-0.006417945493012667,-0.0899105966091156,-0.14911524951457977,0.09623473137617111,-0.1177416443824768,-0.12706728279590607,0.013535083271563053,-0.16166621446609497,-0.14070796966552734,-0.3179526627063751,0.009819330647587776,0.37217068672180176,0.025361478328704834,-0.22452586889266968,0.06465866416692734,-0.0671977624297142,-0.009354919195175171,0.16371464729309082,0.1763904094696045,-0.003120698034763336,-0.0318625271320343,-0.10035860538482666,-0.006505586206912994,0.2731887996196747,-0.11740022897720337,-0.041464075446128845,0.23531487584114075,-0.028174273669719696,0.12573598325252533,0.03469238430261612,0.05912293121218681,-0.034974321722984314,0.05162103474140167,-0.0740949958562851,0.024075716733932495,0.10876814275979996,-0.0060569047927856445,-0.03380625694990158,0.1402292102575302,-0.15626311302185059,0.12542730569839478,-0.02632465772330761,0.06889265775680542,0.10157308727502823,0.004139697179198265,-0.09257142245769501,-0.1175396516919136,0.13229608535766602,-0.15940381586551666,0.23188447952270508,0.1963382363319397,0.0563732385635376,0.1234804317355156,0.09601196646690369,0.11171875149011612,-0.04140885919332504,0.007354693487286568,-0.2602905035018921,-0.04607028886675835,0.12536729872226715,0.05610356479883194,0.0428944006562233,0.027204416692256927],[-0.0497012659907341,0.1189899742603302,0.08574607223272324,-0.009091207757592201,-0.04421094059944153,-0.03454701229929924,-0.10521578788757324,-0.11133487522602081,0.13172230124473572,-0.11659981310367584,0.24732090532779694,-0.059449203312397,-0.18985174596309662,-0.09114581346511841,-0.043367527425289154,0.19413119554519653,-0.2192186862230301,-0.1106543317437172,-0.04669470340013504,-0.01603695936501026,0.09014934301376343,0.07070182263851166,0.038443565368652344,-0.00195391196757555,-0.04582979530096054,-0.37929007411003113,-0.08208265900611877,-0.09903445839881897,0.03819987177848816,-0.07503949105739594,-0.08859747648239136,0.033569954335689545,-0.14834624528884888,-0.03938412666320801,0.011966655030846596,0.02353716269135475,0.010139617137610912,-0.040046773850917816,0.21282215416431427,-0.019842293113470078,-0.21220619976520538,0.06664074212312698,0.0022536194883286953,0.23895737528800964,0.22396178543567657,0.08947791159152985,-0.006229475140571594,-0.13889342546463013,0.13451513648033142,-0.16829684376716614,0.03150482475757599,0.17174600064754486,0.07770860940217972,0.07254578918218613,-0.03536248207092285,-0.08740166574716568,0.009268756955862045,0.026492206379771233,-0.08685436844825745,0.003769648727029562,0.10018705576658249,-0.15251852571964264,0.003602996002882719,-0.021153904497623444,0.22139829397201538,0.01063563022762537,-0.09318043291568756,-0.15563572943210602,0.08772111684083939,-0.13034316897392273,-0.1263517439365387,0.003207394853234291,-0.1564846634864807,-0.12030614912509918,-0.3251695930957794,0.001333390362560749,0.3668886423110962,0.026432186365127563,-0.22588415443897247,0.07155740261077881,-0.05977349355816841,0.0035794314462691545,0.1576698273420334,0.16679657995700836,-0.01887057162821293,-0.03349709510803223,-0.11721299588680267,-0.00441344827413559,0.2513298988342285,-0.12394234538078308,-0.02872968092560768,0.2316708117723465,-0.021967146545648575,0.1316479593515396,0.02501571737229824,0.06516756862401962,-0.024913504719734192,0.048653796315193176,-0.08515322953462601,0.02876501902937889,0.10993428528308868,0.004448194522410631,-0.02272658795118332,0.1308353841304779,-0.16369694471359253,0.12087245285511017,-0.02215917780995369,0.07442179322242737,0.10601436346769333,-0.007282515987753868,-0.08444905281066895,-0.10892842710018158,0.13805291056632996,-0.16438287496566772,0.20474334061145782,0.1933518946170807,0.039103370159864426,0.11724349111318588,0.10871943086385727,0.12114334106445312,-0.033012084662914276,-0.007974481210112572,-0.2494618147611618,-0.04455112665891647,0.11661097407341003,0.056455403566360474,0.03820196911692619,0.029077380895614624]]}]')},127:function(e,t,n){e.exports=n(247)},132:function(e,t,n){},133:function(e,t,n){},142:function(e,t){},144:function(e,t){},176:function(e,t){},177:function(e,t){},219:function(e,t){},220:function(e,t){},221:function(e,t){},222:function(e,t){},223:function(e,t){},225:function(e,t,n){e.exports=n.p+"static/media/test.34e86f06.jpg"},226:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(121),o=n.n(c),s=(n(132),n(19)),i=n(20),u=n(22),l=n(21),p=n(23),f=n(27),m=n(12),h=(n(133),n(26)),d=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("center",null,r.a.createElement("h2",null,"Facial Recognition App"),r.a.createElement("ul",{style:{listStyleType:"none",fontSize:"20px"}},r.a.createElement("li",null,r.a.createElement(h.a,{to:"/train"},"Train Model")),r.a.createElement("li",null,r.a.createElement(h.a,{to:"/photo"},"Photo Input")),r.a.createElement("li",null,r.a.createElement(h.a,{to:"/camera"},"Video Camera"))))}}]),t}(a.Component),b=n(48),g=n(6),v=n.n(g),y=n(9),O=n(24);function x(){return w.apply(this,arguments)}function w(){return(w=Object(y.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/facial-recognition-app/models",e.next=3,O.h(t);case 3:return e.next=5,O.f(t);case 5:return e.next=7,O.g(t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(e){return E.apply(this,arguments)}function E(){return(E=Object(y.a)(v.a.mark(function e(t){var n,a,r,c,o,s,i=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:512,a=.5,r=new O.c({inputSize:n,scoreThreshold:a}),c=!0,e.next=6,O.e(t);case 6:return o=e.sent,e.next=9,O.d(o,r).withFaceLandmarks(c).withFaceDescriptors();case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=.5;function S(e){return C.apply(this,arguments)}function C(){return(C=Object(y.a)(v.a.mark(function e(t){var n,a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t),console.log(n),a=n.map(function(e){return new O.b(t[e].name,t[e].descriptors.map(function(e){return new Float32Array(e)}))}),r=new O.a(a,k),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=n(225),R=n(113),F={imageURL:P,fullDesc:null,detections:null,descriptors:null,match:null},U=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).componentWillMount=Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return e.t0=n,e.next=5,S(R);case 5:return e.t1=e.sent,e.t2={faceMatcher:e.t1},e.t0.setState.call(e.t0,e.t2),e.next=10,n.handleImage(n.state.imageURL);case 10:case"end":return e.stop()}},e)})),n.handleImage=Object(y.a)(v.a.mark(function e(){var t,a,r=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:n.state.imageURL,e.next=3,j(t).then(function(e){e&&n.setState({fullDesc:e,detections:e.map(function(e){return e.detection}),descriptors:e.map(function(e){return e.descriptor})})});case 3:if(!n.state.descriptors||!n.state.faceMatcher){e.next=8;break}return e.next=6,n.state.descriptors.map(function(e){return n.state.faceMatcher.findBestMatch(e)});case 6:a=e.sent,n.setState({match:a});case 8:case"end":return e.stop()}},e)})),n.handleFileChange=function(){var e=Object(y.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.resetState(),e.next=3,n.setState({imageURL:URL.createObjectURL(t.target.files[0]),loading:!0});case 3:n.handleImage();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.resetState=function(){n.setState(M({},F))},n.state=M({},F,{faceMatcher:null}),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.imageURL,n=e.detections,a=e.match,c=null;return n&&(c=n.map(function(e,t){var n=e.box.height,c=e.box.width,o=e.box._x,s=e.box._y;return r.a.createElement("div",{key:t},r.a.createElement("div",{style:{position:"absolute",border:"solid",borderColor:"blue",height:n,width:c,transform:"translate(".concat(o,"px,").concat(s,"px)")}},a?r.a.createElement("p",{style:{backgroundColor:"blue",border:"solid",borderColor:"blue",width:c,marginTop:0,color:"#fff",transform:"translate(-3px,".concat(n,"px)")}},a[t]._label):null))})),r.a.createElement("div",null,r.a.createElement("input",{id:"myFileUpload",type:"file",onChange:this.handleFileChange,accept:".jpg, .jpeg, .png"}),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement("img",{src:t,alt:"imageURL"})),c||null))}}]),t}(a.Component),N=Object(f.e)(U),I=n(124),L=n.n(I),T=n(113),A=160,_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).UNSAFE_componentWillMount=Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return e.t0=n,e.next=5,S(T);case 5:e.t1=e.sent,e.t2={faceMatcher:e.t1},e.t0.setState.call(e.t0,e.t2),n.setInputDevice();case 9:case"end":return e.stop()}},e)})),n.setInputDevice=function(){navigator.mediaDevices.enumerateDevices().then(function(){var e=Object(y.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.filter(function(e){return"videoinput"===e.kind});case 2:if(!(e.sent.length<2)){e.next=8;break}return e.next=6,n.setState({facingMode:"user"});case 6:e.next=10;break;case 8:return e.next=10,n.setState({facingMode:{exact:"environment"}});case 10:n.startCapture();case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},n.startCapture=function(){n.interval=setInterval(function(){n.capture()},100)},n.capture=Object(y.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.webcam.current){e.next=8;break}return e.next=3,j(n.webcam.current.getScreenshot(),A).then(function(e){e&&n.setState({detections:e.map(function(e){return e.detection}),descriptors:e.map(function(e){return e.descriptor})})});case 3:if(!n.state.descriptors||!n.state.faceMatcher){e.next=8;break}return e.next=6,n.state.descriptors.map(function(e){return n.state.faceMatcher.findBestMatch(e)});case 6:t=e.sent,n.setState({match:t});case 8:case"end":return e.stop()}},e)})),n.webcam=r.a.createRef(),n.state={fullDesc:null,detections:null,descriptors:null,faceMatcher:null,match:null,facingMode:null},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.detections,n=e.match,a=e.facingMode,c=null,o="";a&&(c={width:420,height:420,facingMode:a},o="user"===a?"Front":"Back");var s=null;return t&&(s=t.map(function(e,t){var a=e.box.height,c=e.box.width,o=e.box._x,s=e.box._y;return r.a.createElement("div",{key:t},r.a.createElement("div",{style:{position:"absolute",border:"solid",borderColor:"blue",height:a,width:c,transition:"all .2s ease",transform:"translate(".concat(o,"px,").concat(s,"px)")}},n&&n[t]?r.a.createElement("p",{style:{backgroundColor:"blue",border:"solid",borderColor:"blue",width:c,marginTop:0,color:"#fff",transition:"all .2s ease",transform:"translate(-3px,".concat(a,"px)")}},n[t]._label):null))})),r.a.createElement("div",{className:"Camera",style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("p",null,"Camera: ",o),r.a.createElement("div",{style:{width:420,height:420}},r.a.createElement("div",{style:{position:"relative",width:420}},c?r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement(L.a,{audio:!1,width:420,height:420,ref:this.webcam,screenshotFormat:"image/jpeg",videoConstraints:c})):null,s||null)))}}]),t}(a.Component),W=Object(f.e)(_),B=(n(226),n(125)),J=n.n(B),z=n(75),V=n.n(z),$=n(126),q=n.n($);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K={name:"Robby",images:[],descriptors:[],hasDownload:!1,progress:0,loading:!1},Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).resetState=function(){n.setState(H({},K))},n.state=H({},K,{faceMatcher:null}),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"onFileChange",value:function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.resetState(),console.log("files",t),n=Array.from(t).map(function(e){return{name:e.name,valid:!0,url:URL.createObjectURL(e)}}),this.setState({images:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"runFaceTrain",value:function(){var e=Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!V.a.isEmpty(this.state.name)){e.next=2;break}return e.abrupt("return",alert("Please enter your name."));case 2:if(!V.a.isEmpty(this.state.images)){e.next=4;break}return e.abrupt("return",alert("Please select images."));case 4:return console.log("Start to feature extraction"),e.next=7,this.setState({hasDownload:!1,progress:0,descriptors:[],loading:!0});case 7:return e.next=9,this.getDescriptors();case 9:return e.next=11,this.getResult();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getDescriptors",value:function(){var e=Object(y.a)(v.a.mark(function e(){var t=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.images.forEach(function(){var e=Object(y.a)(v.a.mark(function e(n){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(n.url);case 2:a=e.sent,console.log(n.name,a),(r=t.state.descriptors).push(a[0].descriptor),t.setState({descriptors:r});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getResult",value:function(){var e=this;if(this.state.descriptors.length!==this.state.images.length||this.state.hasDownload){var t=this.state.progress>90?90:this.state.progress+30;t=t>100?100:t,setTimeout(function(){console.log(t),e.setState({progress:t},function(){return e.getResult()})},1e3)}else this.setState({hasDownload:!0,progress:100,loading:!1}),console.log("descriptors",this.state.descriptors),function(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(e),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",t+".json"),document.body.appendChild(a),a.click(),a.remove()}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Robby Wu",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.map(function(e){return q()(e.join(","))});return JSON.stringify({name:e,descriptors:n}).replace(/\"'/g,"\n    [").replace(/\'"/g,"]").replace(/\]]/g,"]\n]").replace(/\"descriptors":/g,'\n  "descriptors": ').replace(/\"name":/g,'\n  "name": ').replace(/\]}/g,"  ]\n}")}(this.state.name,this.state.descriptors),"dataset")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"train",className:this.state.loading?"loading":""},r.a.createElement("header",null,"\u5716\u7247\u7279\u5fb5\u63d0\u53d6 ",r.a.createElement("small",null,"Feature Extraction")),r.a.createElement("div",{className:"train-tools"},r.a.createElement("label",{htmlFor:"uname"},"Name:"),r.a.createElement("input",{className:"tool-name",id:"uname",type:"text",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),r.a.createElement("input",{className:"tool-file",id:"myFileUpload",type:"file",onChange:function(t){return e.onFileChange(t.target.files)},accept:".jpg, .jpeg, .png",multiple:!0}),r.a.createElement("button",{className:"tool-start",type:"button",onClick:function(){return e.runFaceTrain()}},"\u958b\u59cb\u7279\u5fb5\u63d0\u53d6")),r.a.createElement(J.a,{completed:this.state.progress}),r.a.createElement("div",{className:"train-images"},this.state.images.map(function(e,t){return r.a.createElement("img",{className:"image",key:"image-".concat(t),src:e.url,alt:e.name})})))}}]),t}(a.Component),X=Object(f.e)(Q),Y=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f.b,{history:Object(m.a)({basename:"/facial-recognition-app"})},r.a.createElement("div",{className:"route"},r.a.createElement(f.a,{exact:!0,path:"/",component:d}),r.a.createElement(f.a,{exact:!0,path:"/photo",component:N}),r.a.createElement(f.a,{exact:!0,path:"/camera",component:W}),r.a.createElement(f.a,{exact:!0,path:"/train",component:X}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[127,1,2]]]);
//# sourceMappingURL=main.0ded8efd.chunk.js.map